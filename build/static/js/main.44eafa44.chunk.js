(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(t,e,n){t.exports=n(19)},17:function(t,e,n){},18:function(t,e,n){},19:function(t,e,n){"use strict";n.r(e);var o=n(0),a=n.n(o),i=n(7),s=n.n(i),r=(n(17),n(2)),l=n(3),u=n(5),c=n(4),h=n(6),m=n(1),d=(n(18),n(8)),p=window.innerHeight,b=function(t){function e(t){var n;return Object(r.a)(this,e),(n=Object(u.a)(this,Object(c.a)(e).call(this,t))).state={style:{top:-p/5},lastAutocompleteObject:{},autocompleteArray:[],submitValue:""},n.mountStyle=n.mountStyle.bind(Object(m.a)(Object(m.a)(n))),n.unMountStyle=n.unMountStyle.bind(Object(m.a)(Object(m.a)(n))),n.checkAutocompleteArray=n.checkAutocompleteArray.bind(Object(m.a)(Object(m.a)(n))),n.makeAutocompleteJSX=n.makeAutocompleteJSX.bind(Object(m.a)(Object(m.a)(n))),n.clicked=n.clicked.bind(Object(m.a)(Object(m.a)(n))),n.textEnter=n.textEnter.bind(Object(m.a)(Object(m.a)(n))),n}return Object(h.a)(e,t),Object(l.a)(e,[{key:"componentDidMount",value:function(){console.log("Mounting Form"),setTimeout(this.mountStyle,10)}},{key:"shouldComponentUpdate",value:function(){return!0}},{key:"componentWillReceiveProps",value:function(t){t.mounted||this.unMountStyle(),t.autocompleteObject!==this.state.lastAutocompleteObject&&void 0!==t.autocompleteObject&&this.checkAutocompleteArray(t.autocompleteObject)}},{key:"checkAutocompleteArray",value:function(t){console.log(t);for(var e=this.state.autocompleteArray,n=!1,o=0;o<e.length;o++)e[o].id===t.id&&(n=!0);n||(e.length<5?e.unshift(t):(e.pop(),e.unshift(t))),console.log(e[0].id),this.setState({autocompleteArray:e})}},{key:"makeAutocompleteJSX",value:function(){var t=this,e=this.state.autocompleteArray.map(function(e){return console.log(e.id),a.a.createElement("li",{key:e.id,onClick:t.clicked,id:e.id,style:{border:"1px solid gray"}},e.name)});return a.a.createElement("ul",{style:y},e)}},{key:"textEnter",value:function(t){this.props.autocomplete(t),13===t.target.value.keyCode&&console.log("Send: "+this.state.submitValue),this.setState({submitValue:t.target.value})}},{key:"clicked",value:function(t){this.setState({submitValue:t.target.textContent})}},{key:"mountStyle",value:function(){this.setState({style:{top:p/2,transition:"top 0.3s ease"}})}},{key:"unMountStyle",value:function(){console.log("unmounting form"),this.setState({style:{top:-p/5,transition:"top 0.3s ease"}})}},{key:"render",value:function(){return a.a.createElement("div",{style:Object(d.a)({},this.state.style,f)},a.a.createElement("form",null,a.a.createElement("label",null,"Author:",a.a.createElement("input",{type:"text",name:"searchField",autoComplete:"off",value:this.state.submitValue,onChange:this.textEnter})),a.a.createElement("input",{type:"submit",value:"Submit",onClick:this.props.submit})),this.makeAutocompleteJSX())}}]),e}(a.a.Component),f={position:"absolute",left:0,right:0,margin:"auto"},y={textDecoration:"none",listStyleType:"none",boder:"1 solid gray",margin:"auto",fontSize:"0.75em",width:130,textAlign:"left",padding:0},g=window.innerWidth,O=function(t){function e(t){var n;return Object(r.a)(this,e),(n=Object(u.a)(this,Object(c.a)(e).call(this,t))).state={show:!0,style:{left:-g/4}},n.mountStyle=n.mountStyle.bind(Object(m.a)(Object(m.a)(n))),n.unMountStyle=n.unMountStyle.bind(Object(m.a)(Object(m.a)(n))),n.transitionEnd=n.transitionEnd.bind(Object(m.a)(Object(m.a)(n))),n}return Object(h.a)(e,t),Object(l.a)(e,[{key:"componentDidMount",value:function(){setTimeout(this.mountStyle,10)}},{key:"componentWillReceiveProps",value:function(t){t.mounted||this.unMountStyle()}},{key:"mountStyle",value:function(){this.setState({style:{left:0,transition:"left 0.3s ease"}})}},{key:"unMountStyle",value:function(){console.log("unmounting Aside"),this.setState({style:{left:-g/4,transition:"left 0.3s ease"}})}},{key:"transitionEnd",value:function(){console.log("transitionEnd"),this.props.mounted||this.setState({show:!1})}},{key:"render",value:function(){return a.a.createElement("div",{style:Object(d.a)({},this.state.style,v),className:"authorAside"},a.a.createElement("div",{className:"backArrow",onClick:this.props.cancelAuthor},a.a.createElement("p",null,"Arrow")),a.a.createElement("div",{className:"imageContainer"},a.a.createElement("img",{src:this.props.authorJson.imageUrl,alt:""})),a.a.createElement("div",{className:"textContainer"},a.a.createElement("p",null,"Hometown"),a.a.createElement("p",null,"Born At"),a.a.createElement("p",null,"Death")))}}]),e}(a.a.Component),v={position:"fixed",height:"100vh",borderRight:"4px solid #61dafb",backgroundColor:"#484f5e",width:"25%"},k=(window.innerHeight,window.innerWidth,function(t){function e(t){var n;return Object(r.a)(this,e),(n=Object(u.a)(this,Object(c.a)(e).call(this,t))).state={show:!0,style:{top:n.props.top,left:n.props.left,width:300,height:200}},n.mountStyle=n.mountStyle.bind(Object(m.a)(Object(m.a)(n))),n.expandStyle=n.expandStyle.bind(Object(m.a)(Object(m.a)(n))),n.unMountStyle=n.unMountStyle.bind(Object(m.a)(Object(m.a)(n))),n.retractStyle=n.retractStyle.bind(Object(m.a)(Object(m.a)(n))),n}return Object(h.a)(e,t),Object(l.a)(e,[{key:"componentDidMount",value:function(){setTimeout(this.mountStyle,0)}},{key:"componentWillReceiveProps",value:function(t){t.mounted||this.retractStyle()}},{key:"mountStyle",value:function(){console.log("mounting"),this.setState({style:{top:0,left:this.props.leftMost,width:300,height:200,transition:"all 1s ease"}}),setTimeout(this.expandStyle,1e3)}},{key:"expandStyle",value:function(){this.setState({style:{top:0,left:this.props.leftMost,width:"55.5%",height:400,transition:"all 1s ease"}})}},{key:"unMountStyle",value:function(){console.log("mounting"),this.setState({style:{top:this.props.top,left:this.props.left,width:300,height:200,transition:"all 1s ease"}})}},{key:"retractStyle",value:function(){console.log("unounting"),this.setState({style:{top:0,left:this.props.leftMost,width:300,height:200,transition:"all 1s ease"}}),setTimeout(this.unMountStyle,1e3)}},{key:"render",value:function(){return a.a.createElement("div",{style:Object(d.a)({},j,this.state.style)},a.a.createElement("div",{className:"imageContainer",style:S},a.a.createElement("img",{src:this.props.imageUrl,alt:"",style:A})),a.a.createElement("div",{className:"rightContainer",style:E},a.a.createElement("p",null,this.props.title),a.a.createElement("p",null,"Rating ",this.props.rating),a.a.createElement("p",null,"bb status")),a.a.createElement("div",{className:"bottomContainer",style:w},a.a.createElement("p",null,"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut a ullamcorper lectus, et vulputate massa. Aliquam turpis quam, ultrices non pharetra elementum, faucibus pretium nisl. Fusce in finibus sapien. Suspendisse diam mi, euismod at iaculis non, viverra sed tortor. Fusce lobortis malesuada metus sit amet lobortis. Pellentesque rhoncus urna sit amet odio malesuada sodales. Proin at ipsum et lorem mollis malesuada. Aenean tempor molestie elementum.")))}}]),e}(a.a.Component)),j={width:200,height:100,margin:"1%",position:"fixed",overflow:"hidden",display:"flex",flexWrap:"wrap",backgroundColor:"rgb(72, 79, 94)",borderColor:"rgb(97, 218, 251)",borderWidth:4,borderRadius:20,borderStyle:"solid"},S={flex:1,display:"flex"},A={maxWidth:"80%",margin:"auto"},E={flex:1},w={width:"100%"},C=n(9),x=n.n(C),B=function(t){function e(t){var n;return Object(r.a)(this,e),(n=Object(u.a)(this,Object(c.a)(e).call(this,t))).state={loc:"N/A",waitingReply:!0},n.titleInArray=n.titleInArray.bind(Object(m.a)(Object(m.a)(n))),n.sendBookDetailsRequest=n.sendBookDetailsRequest.bind(Object(m.a)(Object(m.a)(n))),n.updateLoc=n.updateLoc.bind(Object(m.a)(Object(m.a)(n))),n}return Object(h.a)(e,t),Object(l.a)(e,[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(){}},{key:"componentWillReceiveProps",value:function(t){t.bbBookArray.length>=1&&this.titleInArray(t.bbBookArray)}},{key:"titleInArray",value:function(t){for(var e=[],n=0;n<t.length;n++){var o=t[n].title.replace(/[^a-zA-Z]/g,"").toLowerCase();e.push(o)}var a=this.props.title.replace(/[^a-zA-Z]/g,"").toLowerCase(),i=e.indexOf(a);if(i>-1)if(console.log("BOOK INCLUDED!!"+a),t[i].isAvailable){var s=t[i].bookUrl;this.sendBookDetailsRequest(s)}else console.log("book is not available");else this.setState({waitingReply:!1})}},{key:"sendBookDetailsRequest",value:function(t){var e=this,n={url:t};fetch("bergenBiblBook/",{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){return e.updateLoc(t.location)}).catch(function(t){return console.error("Error:",t)})}},{key:"updateLoc",value:function(t){this.setState({loc:t,waitingReply:!1})}},{key:"render",value:function(){return a.a.createElement("div",{className:"bbstatus",style:R},a.a.createElement("p",null,"Loc"),this.state.waitingReply?a.a.createElement(x.a,{className:"spinner",color:"rgb(97, 218, 251)",height:"30%",width:"30%"}):a.a.createElement("p",null,this.state.loc))}}]),e}(a.a.Component),R={display:"flex"},M=window.innerWidth,N=function(t){function e(t){var n;return Object(r.a)(this,e),(n=Object(u.a)(this,Object(c.a)(e).call(this,t))).state={expanded:!1,mountExtended:!0},n.bookRef=a.a.createRef(),n.expandRetract=n.expandRetract.bind(Object(m.a)(Object(m.a)(n))),n.findTitle=n.findTitle.bind(Object(m.a)(Object(m.a)(n))),n}return Object(h.a)(e,t),Object(l.a)(e,[{key:"componentDidMount",value:function(){}},{key:"expandRetract",value:function(){var t=this;!this.state.expanded?this.setState({expanded:!0}):(this.setState({mountExtended:!1}),setTimeout(function(){t.setState({expanded:!1})},2e3))}},{key:"findTitle",value:function(){var t=this.props.title;return t.length>14?t.substring(0,14)+"...":t}},{key:"render",value:function(){return this.state.expanded?(console.log(this.props.leftMost),a.a.createElement("div",{style:D,onClick:this.expandRetract},a.a.createElement(k,{top:s.a.findDOMNode(this).offsetTop-window.pageYOffset,left:s.a.findDOMNode(this).offsetLeft+M/4,leftMost:this.props.leftMost,mounted:this.state.mountExtended,title:this.props.title,rating:this.props.rating,bbStatus:"bb status",imageUrl:this.props.imageUrl}))):a.a.createElement("div",{style:T,onClick:this.expandRetract,className:"book"},a.a.createElement("div",{className:"leftBook",style:J},a.a.createElement("img",{src:this.props.imageUrl,alt:"",style:L})),a.a.createElement("div",{className:"rightBook",style:W},a.a.createElement("p",null,this.findTitle()),a.a.createElement("p",null,"Rating ",this.props.rating),a.a.createElement(B,{bbBookArray:this.props.bbBookArray,title:this.props.title})))}}]),e}(a.a.Component),T={width:350,height:200,backgroundColor:"rgb(72, 79, 94)",margin:"1%",overflow:"hidden",display:"flex",borderStyle:"groove",borderColor:"rgb(97, 218, 251)",borderWidth:4,borderRadius:20},D={width:350,height:200,margin:"1%",backgroundColor:"#282c34"},J={flex:1,display:"flex"},W={flex:1},L={maxWidth:"80%",margin:"auto"},q=window.innerWidth,F=window.innerHeight,P=function(t){function e(t){var n;return Object(r.a)(this,e),(n=Object(u.a)(this,Object(c.a)(e).call(this,t))).state={show:!0,bookContainerLeft:{left:q/4,top:F,transition:"top 0.3s ease"},leftOffset:0},n.mountStyle=n.mountStyle.bind(Object(m.a)(Object(m.a)(n))),n.unMountStyle=n.unMountStyle.bind(Object(m.a)(Object(m.a)(n))),n}return Object(h.a)(e,t),Object(l.a)(e,[{key:"componentWillUpdate",value:function(){}},{key:"componentWillReceiveProps",value:function(t){t.mounted||this.unMountStyle()}},{key:"componentDidMount",value:function(){var t=s.a.findDOMNode(this).offsetLeft+.1*q;this.setState({leftOffset:t}),setTimeout(this.mountStyle,100)}},{key:"mountStyle",value:function(){this.setState({bookContainerLeft:{left:q/4,top:0,transition:"top 0.3s ease"}})}},{key:"unMountStyle",value:function(){console.log("unmounting bookContainer"),this.setState({bookContainerLeft:{left:q/4,top:F,transition:"top 0.3s ease"}})}},{key:"createBooks",value:function(){var t=this;return this.props.books.map(function(e,n){return a.a.createElement(N,{title:e.title[0],rating:e.average_rating,key:e.title[0],imageUrl:e.image_url,leftMost:t.state.leftOffset,index:n,bbBookArray:t.props.bbBookArray})})}},{key:"render",value:function(){return a.a.createElement("div",{style:Object(d.a)({},this.state.bookContainerLeft,I),className:"bookContainer"},a.a.createElement("div",{style:U},this.createBooks()))}}]),e}(a.a.Component),I={width:"75%",position:"relative",height:"100%",display:"flex",justifyContent:"center"},U={width:"90%",alignItems:"center",justifyContent:"space-around",display:"flex",flexWrap:"wrap"},H=(window.innerHeight,window.innerWidth,function(t){function e(){return Object(r.a)(this,e),Object(u.a)(this,Object(c.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(l.a)(e,[{key:"componentWillReceiveProps",value:function(t){}},{key:"render",value:function(){return a.a.createElement("div",{className:"authorSContainer",style:V},a.a.createElement(O,{authorJson:this.props.authorJson,mounted:this.props.mounted,cancelAuthor:this.props.cancelAuthor}),a.a.createElement(P,{books:this.props.authorJson.booksArray,mounted:this.props.mounted,bbBookArray:this.props.bbBookArray}))}}]),e}(a.a.Component)),V={display:"flex",width:"100%",minHeight:"100vh",overflow:"hidden"},X=function(t){function e(){return Object(r.a)(this,e),Object(u.a)(this,Object(c.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){return a.a.createElement("div",{style:z,onClick:this.props.clickedProp},a.a.createElement("div",{className:"top",style:Z},a.a.createElement("p",{style:_},"X"),a.a.createElement("p",{style:K},"Loading Author Data")),a.a.createElement(x.a,{className:"spinner",type:"spin",color:"rgb(97, 218, 251)",height:"30%",width:"30%"}))}}]),e}(a.a.Component),z={width:200,height:200,borderRadius:20,backgroundColor:"rgb(72, 79, 94)"},Z={display:"flex",flexDirection:"column"},_={marginTop:10,marginLeft:160},K={fontSize:"0.75em"},Y=function(t){function e(t){var n;return Object(r.a)(this,e),(n=Object(u.a)(this,Object(c.a)(e).call(this,t))).state={mountForm:!0,autocompleteObject:{},authorSelected:!1,mountAuthor:!1,authorJson:{},waitingReply:!1,bbBookArray:[]},n.sendAutocompleteRequest=n.sendAutocompleteRequest.bind(Object(m.a)(Object(m.a)(n))),n.sendBBBookRequest=n.sendBBBookRequest.bind(Object(m.a)(Object(m.a)(n))),n.updateBBarray=n.updateBBarray.bind(Object(m.a)(Object(m.a)(n))),n.submitClick=n.submitClick.bind(Object(m.a)(Object(m.a)(n))),n.cancelSubmit=n.cancelSubmit.bind(Object(m.a)(Object(m.a)(n))),n.unMountAuthor=n.unMountAuthor.bind(Object(m.a)(Object(m.a)(n))),n.getNameIdObject=n.getNameIdObject.bind(Object(m.a)(Object(m.a)(n))),n.updateAutoCompleteState=n.updateAutoCompleteState.bind(Object(m.a)(Object(m.a)(n))),n}return Object(h.a)(e,t),Object(l.a)(e,[{key:"sendAutocompleteRequest",value:function(t){var e=this;this.getNameIdObject(t.target.value,function(t){console.log(t),e.updateAutoCompleteState(t)})}},{key:"getNameIdObject",value:function(t,e){var n={string:t};fetch("searchString/",{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){return e(t)}).catch(function(t){return console.error("Error:",t)})}},{key:"sendBBBookRequest",value:function(){var t=this,e=this.state.authorJson.name;console.log(e);var n={authorName:e};fetch("bergenBiblAuthor/",{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(e){return t.updateBBarray(e)}).catch(function(t){return console.error("Error:",t)})}},{key:"updateBBarray",value:function(t){var e=this;console.log(t),setTimeout(function(){e.setState({bbBookArray:t})},1500)}},{key:"updateAutoCompleteState",value:function(t){console.log(t),this.setState({autocompleteObject:t})}},{key:"submitClick",value:function(t){t.preventDefault(),this.unMountForm();var e=this;this.getNameIdObject(this.state.autocompleteObject.name,function(t){console.log(t),e.updateAutoCompleteState(t);var n={id:t.id};fetch("fullSearch/",{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){return e.updateAuthorState(t)}).catch(function(t){return console.error("Error:",t)})})}},{key:"updateAuthorState",value:function(t){this.setState({authorJson:t,waitingReply:!1}),setTimeout(this.sendBBBookRequest,500)}},{key:"unMountForm",value:function(){var t=this;this.setState({mountForm:!1}),setTimeout(function(){t.setState({mountAuthor:!0,showForm:!1,authorSelected:!0,waitingReply:!0})},300)}},{key:"unMountAuthor",value:function(){var t=this;this.setState({mountAuthor:!1}),setTimeout(function(){t.setState({showForm:!0,mountForm:!0,authorSelected:!1,autocomplete:"",authorJson:{}})},300)}},{key:"cancelSubmit",value:function(){var t=this;this.setState({waitingReply:!1,authorSelected:!1}),setTimeout(function(){t.setState({showForm:!0,mountForm:!0,autocomplete:"",authorJson:{}})},300)}},{key:"loadingCancelled",value:function(){}},{key:"render",value:function(){return this.state.authorSelected?this.state.waitingReply?a.a.createElement("div",{className:"App"},a.a.createElement("header",{className:"App-header"},a.a.createElement(X,{clickedProp:this.cancelSubmit}))):a.a.createElement("div",{className:"App"},a.a.createElement("header",{className:"App-header"},a.a.createElement(H,{cancelAuthor:this.unMountAuthor,mounted:this.state.mountAuthor,authorJson:this.state.authorJson,bbBookArray:this.state.bbBookArray}))):a.a.createElement("div",{className:"App"},a.a.createElement("header",{className:"App-header"},a.a.createElement(b,{autocomplete:this.sendAutocompleteRequest,submit:this.submitClick,autocompleteObject:this.state.autocompleteObject,mounted:this.state.mountForm})))}}]),e}(o.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(a.a.createElement(Y,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[11,1,2]]]);
//# sourceMappingURL=main.44eafa44.chunk.js.map